FROM node:18

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .

ARG REACT_APP_API_URL
ARG REACT_APP_API_ESPECIALIDADES
ARG REACT_APP_API_DISPONIBLES_ESPECIALIDAD
ARG REACT_APP_API_RESERVAR_TURNO
ARG REACT_APP_API_BLOQUEARTURNO
ARG REACT_APP_API_LIBERARTURNO
ARG REACT_APP_API_OCUPADOS_PACIENTE
ARG REACT_APP_API_CANCELAR_TURNO
ARG REACT_APP_API_ENVIO_CONFIRMACION
ARG REACT_APP_API_PACIENTE_POR_ID_EXTERNO
ARG REACT_APP_API_MEDICO_POR_ID_EXTERNO
ARG REACT_APP_API_TURNOS_OCUPADOS_HOY
ARG REACT_APP_API_MODIFICAR_ESTADO_TURNO
ARG REACT_APP_API_HISTORIAS

ENV REACT_APP_API_URL=$REACT_APP_API_URL

ENV REACT_APP_API_URL=$REACT_APP_API_URL
ENV REACT_APP_API_ESPECIALIDADES=$REACT_APP_API_ESPECIALIDADES
ENV REACT_APP_API_DISPONIBLES_ESPECIALIDAD=$REACT_APP_API_DISPONIBLES_ESPECIALIDAD
ENV REACT_APP_API_RESERVAR_TURNO=$REACT_APP_API_RESERVAR_TURNO
ENV REACT_APP_API_BLOQUEARTURNO=$REACT_APP_API_BLOQUEARTURNO
ENV REACT_APP_API_LIBERARTURNO=$REACT_APP_API_LIBERARTURNO
ENV REACT_APP_API_OCUPADOS_PACIENTE=$REACT_APP_API_OCUPADOS_PACIENTE
ENV REACT_APP_API_CANCELAR_TURNO=$REACT_APP_API_CANCELAR_TURNO
ENV REACT_APP_API_ENVIO_CONFIRMACION=$REACT_APP_API_ENVIO_CONFIRMACION
ENV REACT_APP_API_PACIENTE_POR_ID_EXTERNO=$REACT_APP_API_PACIENTE_POR_ID_EXTERNO
ENV REACT_APP_API_MEDICO_POR_ID_EXTERNO=$REACT_APP_API_MEDICO_POR_ID_EXTERNO
ENV REACT_APP_API_TURNOS_OCUPADOS_HOY=$REACT_APP_API_TURNOS_OCUPADOS_HOY
ENV REACT_APP_API_MODIFICAR_ESTADO_TURNO=$REACT_APP_API_MODIFICAR_ESTADO_TURNO
ENV REACT_APP_API_HISTORIAS=$REACT_APP_API_HISTORIAS

RUN chmod +x node_modules/.bin/react-scripts

RUN npm run build

RUN npm install -g serve
CMD ["serve", "-s", "build"]

EXPOSE 3001